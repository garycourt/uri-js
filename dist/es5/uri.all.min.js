/** @license URI.js v4.4.0 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).URI={})}(this,(function(e){"use strict";function t(...e){if(e.length>1){e[0]=e[0].slice(0,-1);const t=e.length-1;for(let r=1;r<t;++r)e[r]=e[r].slice(1,-1);return e[t]=e[t].slice(1),e.join("")}return e[0]}function r(e){return"(?:"+e+")"}function o(e){return void 0===e?"undefined":null===e?"null":Object.prototype.toString.call(e).split(" ").pop().split("]").shift().toLowerCase()}function n(e){return e.toUpperCase()}function s(e){const o="[A-Za-z]",n="[0-9]",s=t(n,"[A-Fa-f]"),i=r(r("%[EFef]"+s+"%"+s+s+"%"+s+s)+"|"+r("%[89A-Fa-f]"+s+"%"+s+s)+"|"+r("%"+s+s)),c="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",a=t("[\\:\\/\\?\\#\\[\\]\\@]",c),u=e?"[\\uE000-\\uF8FF]":"[]",p=t(o,n,"[\\-\\.\\_\\~]",e?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]"),h=(r(o+t(o,n,"[\\+\\-\\.]")+"*"),r(r(i+"|"+t(p,c,"[\\:]"))+"*"),r(r("25[0-5]")+"|"+r("2[0-4][0-9]")+"|"+r("1[0-9][0-9]")+"|"+r("0?[1-9][0-9]")+"|0?0?"+n)),f=r(h+"\\."+h+"\\."+h+"\\."+h),l=r(s+"{1,4}"),d=r(r(l+"\\:"+l)+"|"+f),m=r(r(l+"\\:")+"{6}"+d),g=r("\\:\\:"+r(l+"\\:")+"{5}"+d),E=r(r(l)+"?\\:\\:"+r(l+"\\:")+"{4}"+d),C=r(r(r(l+"\\:")+"{0,1}"+l)+"?\\:\\:"+r(l+"\\:")+"{3}"+d),v=r(r(r(l+"\\:")+"{0,2}"+l)+"?\\:\\:"+r(l+"\\:")+"{2}"+d),S=r(r(r(l+"\\:")+"{0,3}"+l)+"?\\:\\:"+l+"\\:"+d),D=r(r(r(l+"\\:")+"{0,4}"+l)+"?\\:\\:"+d),y=r(r(r(l+"\\:")+"{0,5}"+l)+"?\\:\\:"+l),A=r(r(r(l+"\\:")+"{0,6}"+l)+"?\\:\\:"),w=r([m,g,E,C,v,S,D,y,A].join("|")),x=r(r(p+"|"+i)+"+"),N=(r("[vV]"+s+"+\\."+t(p,c,"[\\:]")+"+"),r(r(i+"|"+t(p,c))+"*"),r(i+"|"+t(p,c,"[\\:\\@]")));r(r(i+"|"+t(p,c,"[\\@]"))+"+"),r(r(N+"|"+t("[\\/\\?]",u))+"*");return{NOT_SCHEME:new RegExp(t("[^]",o,n,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(t("[^\\%\\:]",p,c),"g"),NOT_HOST:new RegExp(t("[^\\%\\[\\]\\:]",p,c),"g"),NOT_PATH:new RegExp(t("[^\\%\\/\\:\\@]",p,c),"g"),NOT_PATH_NOSCHEME:new RegExp(t("[^\\%\\/\\@]",p,c),"g"),NOT_QUERY:new RegExp(t("[^\\%]",p,c,"[\\:\\@\\/\\?]",u),"g"),NOT_FRAGMENT:new RegExp(t("[^\\%]",p,c,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(t("[^]",p,c),"g"),UNRESERVED:new RegExp(p,"g"),OTHER_CHARS:new RegExp(t("[^\\%]",p,a),"g"),PCT_ENCODED:new RegExp(i,"g"),IPV4ADDRESS:new RegExp("^("+f+")$"),IPV6ADDRESS:new RegExp("^\\[?("+w+")"+r(r("\\%25|\\%(?!"+s+"{2})")+"("+x+")")+"?\\]?$")}}var i=s(!1),c=s(!0);const a=2147483647,u=36,p=/^xn--/,h=/[^\0-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,l={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,m=String.fromCharCode;function g(e){throw new RangeError(l[e])}function E(e,t){const r=e.split("@");let o="";r.length>1&&(o=r[0]+"@",e=r[1]);const n=function(e,t){const r=[];let o=e.length;for(;o--;)r[o]=t(e[o]);return r}((e=e.replace(f,".")).split("."),t).join(".");return o+n}function C(e){const t=[];let r=0;const o=e.length;for(;r<o;){const n=e.charCodeAt(r++);if(n>=55296&&n<=56319&&r<o){const o=e.charCodeAt(r++);56320==(64512&o)?t.push(((1023&n)<<10)+(1023&o)+65536):(t.push(n),r--)}else t.push(n)}return t}const v=function(e,t){return e+22+75*(e<26)-((0!=t)<<5)},S=function(e,t,r){let o=0;for(e=r?d(e/700):e>>1,e+=d(e/t);e>455;o+=u)e=d(e/35);return d(o+36*e/(e+38))},D=function(e){const t=[],r=e.length;let o=0,n=128,s=72,i=e.lastIndexOf("-");i<0&&(i=0);for(let r=0;r<i;++r)e.charCodeAt(r)>=128&&g("not-basic"),t.push(e.charCodeAt(r));for(let p=i>0?i+1:0;p<r;){let i=o;for(let t=1,n=u;;n+=u){p>=r&&g("invalid-input");const i=(c=e.charCodeAt(p++))-48<10?c-22:c-65<26?c-65:c-97<26?c-97:u;(i>=u||i>d((a-o)/t))&&g("overflow"),o+=i*t;const h=n<=s?1:n>=s+26?26:n-s;if(i<h)break;const f=u-h;t>d(a/f)&&g("overflow"),t*=f}const h=t.length+1;s=S(o-i,h,0==i),d(o/h)>a-n&&g("overflow"),n+=d(o/h),o%=h,t.splice(o++,0,n)}var c;return String.fromCodePoint(...t)},y=function(e){const t=[];let r=(e=C(e)).length,o=128,n=0,s=72;for(const r of e)r<128&&t.push(m(r));let i=t.length,c=i;for(i&&t.push("-");c<r;){let r=a;for(const t of e)t>=o&&t<r&&(r=t);const p=c+1;r-o>d((a-n)/p)&&g("overflow"),n+=(r-o)*p,o=r;for(const r of e)if(r<o&&++n>a&&g("overflow"),r==o){let e=n;for(let r=u;;r+=u){const o=r<=s?1:r>=s+26?26:r-s;if(e<o)break;const n=e-o,i=u-o;t.push(m(v(o+n%i,0))),e=d(n/i)}t.push(m(v(e,0))),s=S(n,p,c==i),n=0,++c}++n,++o}return t.join("")};var A={version:"2.1.0",ucs2:{decode:C,encode:e=>String.fromCodePoint(...e)},decode:D,encode:y,toASCII:function(e){return E(e,(function(e){return h.test(e)?"xn--"+y(e):e}))},toUnicode:function(e){return E(e,(function(e){return p.test(e)?D(e.slice(4).toLowerCase()):e}))}};const w={};function x(e){const t=e.charCodeAt(0);let r;return r=t<16?"%0"+t.toString(16).toUpperCase():t<128?"%"+t.toString(16).toUpperCase():t<2048?"%"+(t>>6|192).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase():"%"+(t>>12|224).toString(16).toUpperCase()+"%"+(t>>6&63|128).toString(16).toUpperCase()+"%"+(63&t|128).toString(16).toUpperCase(),r}function N(e){let t="",r=0;const o=e.length;for(;r<o;){const n=parseInt(e.substr(r+1,2),16);if(n<128)t+=String.fromCharCode(n),r+=3;else if(n>=194&&n<224){if(o-r>=6){const o=parseInt(e.substr(r+4,2),16);t+=String.fromCharCode((31&n)<<6|63&o)}else t+=e.substr(r,6);r+=6}else if(n>=224){if(o-r>=9){const o=parseInt(e.substr(r+4,2),16),s=parseInt(e.substr(r+7,2),16);t+=String.fromCharCode((15&n)<<12|(63&o)<<6|63&s)}else t+=e.substr(r,9);r+=9}else t+=e.substr(r,3),r+=3}return t}function O(e,t){function r(e){const r=N(e);return r.match(t.UNRESERVED)?r:e}return e.scheme&&(e.scheme=String(e.scheme).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_SCHEME,"")),void 0!==e.userinfo&&(e.userinfo=String(e.userinfo).replace(t.PCT_ENCODED,r).replace(t.NOT_USERINFO,x).replace(t.PCT_ENCODED,n)),void 0!==e.host&&(e.host=String(e.host).replace(t.PCT_ENCODED,r).toLowerCase().replace(t.NOT_HOST,x).replace(t.PCT_ENCODED,n)),void 0!==e.path&&(e.path=String(e.path).replace(t.PCT_ENCODED,r).replace(e.scheme?t.NOT_PATH:t.NOT_PATH_NOSCHEME,x).replace(t.PCT_ENCODED,n)),void 0!==e.query&&(e.query=String(e.query).replace(t.PCT_ENCODED,r).replace(t.NOT_QUERY,x).replace(t.PCT_ENCODED,n)),void 0!==e.fragment&&(e.fragment=String(e.fragment).replace(t.PCT_ENCODED,r).replace(t.NOT_FRAGMENT,x).replace(t.PCT_ENCODED,n)),e}function b(e){return e.replace(/^0*(.*)/,"$1")||"0"}function F(e,t){const r=e.match(t.IPV4ADDRESS)||[],[,o]=r;return o?o.split(".").map(b).join("."):e}function I(e,t){const r=e.match(t.IPV6ADDRESS)||[],[,o,n]=r;if(o){const[e,r]=o.toLowerCase().split("::").reverse(),s=r?r.split(":").map(b):[],i=e.split(":").map(b),c=t.IPV4ADDRESS.test(i[i.length-1]),a=c?7:8,u=i.length-a,p=Array(a);for(let e=0;e<a;++e)p[e]=s[e]||i[u+e]||"";c&&(p[a-1]=F(p[a-1],t));const h=p.reduce(((e,t,r)=>{if(!t||"0"===t){const t=e[e.length-1];t&&t.index+t.length===r?t.length++:e.push({index:r,length:1})}return e}),[]).sort(((e,t)=>t.length-e.length))[0];let f;if(h&&h.length>1){const e=p.slice(0,h.index),t=p.slice(h.index+h.length);f=e.join(":")+"::"+t.join(":")}else f=p.join(":");return n&&(f+="%"+n),f}return e}const R=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,T=void 0==="".match(/(){0}/)[1];function _(e,t={}){const r={},o=!1!==t.iri?c:i;"suffix"===t.reference&&(e=(t.scheme?t.scheme+":":"")+"//"+e);const n=e.match(R);if(n){T?(r.scheme=n[1],r.userinfo=n[3],r.host=n[4],r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=n[7],r.fragment=n[8],isNaN(r.port)&&(r.port=n[5])):(r.scheme=n[1]||void 0,r.userinfo=-1!==e.indexOf("@")?n[3]:void 0,r.host=-1!==e.indexOf("//")?n[4]:void 0,r.port=parseInt(n[5],10),r.path=n[6]||"",r.query=-1!==e.indexOf("?")?n[7]:void 0,r.fragment=-1!==e.indexOf("#")?n[8]:void 0,isNaN(r.port)&&(r.port=e.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?n[4]:void 0)),r.host&&(r.host=I(F(r.host,o),o)),void 0!==r.scheme||void 0!==r.userinfo||void 0!==r.host||void 0!==r.port||r.path||void 0!==r.query?void 0===r.scheme?r.reference="relative":void 0===r.fragment?r.reference="absolute":r.reference="uri":r.reference="same-document",t.reference&&"suffix"!==t.reference&&t.reference!==r.reference&&(r.error=r.error||"URI is not a "+t.reference+" reference.");const s=w[(t.scheme||r.scheme||"").toLowerCase()];if(t.unicodeSupport||s&&s.unicodeSupport)O(r,o);else{if(r.host&&(t.domainHost||s&&s.domainHost))try{r.host=A.toASCII(r.host.replace(o.PCT_ENCODED,N).toLowerCase())}catch(e){r.error=r.error||"Host's domain name can not be converted to ASCII via punycode: "+e}O(r,i)}s&&s.parse&&s.parse(r,t)}else r.error=r.error||"URI can not be parsed.";return r}const P=/^\.\.?\//,q=/^\/\.(\/|$)/,U=/^\/\.\.(\/|$)/,H=/^\/?(?:.|\n)*?(?=\/|$)/;function j(e){const t=[];for(;e.length;)if(e.match(P))e=e.replace(P,"");else if(e.match(q))e=e.replace(q,"/");else if(e.match(U))e=e.replace(U,"/"),t.pop();else if("."===e||".."===e)e="";else{const r=e.match(H);if(!r)throw new Error("Unexpected dot segment condition");{const o=r[0];e=e.slice(o.length),t.push(o)}}return t.join("")}function $(e,t={}){const r=t.iri?c:i,o=[],n=w[(t.scheme||e.scheme||"").toLowerCase()];if(n&&n.serialize&&n.serialize(e,t),e.host)if(r.IPV6ADDRESS.test(e.host));else if(t.domainHost||n&&n.domainHost)try{e.host=t.iri?A.toUnicode(e.host):A.toASCII(e.host.replace(r.PCT_ENCODED,N).toLowerCase())}catch(r){e.error=e.error||"Host's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+r}O(e,r),"suffix"!==t.reference&&e.scheme&&(o.push(e.scheme),o.push(":"));const s=function(e,t){const r=!1!==t.iri?c:i,o=[];return void 0!==e.userinfo&&(o.push(e.userinfo),o.push("@")),void 0!==e.host&&o.push(I(F(String(e.host),r),r).replace(r.IPV6ADDRESS,((e,t,r)=>"["+t+(r?"%25"+r:"")+"]"))),"number"!=typeof e.port&&"string"!=typeof e.port||(o.push(":"),o.push(String(e.port))),o.length?o.join(""):void 0}(e,t);if(void 0!==s&&("suffix"!==t.reference&&o.push("//"),o.push(s),e.path&&"/"!==e.path.charAt(0)&&o.push("/")),void 0!==e.path){let r=e.path;t.absolutePath||n&&n.absolutePath||(r=j(r)),void 0===s&&(r=r.replace(/^\/\//,"/%2F")),o.push(r)}return void 0!==e.query&&(o.push("?"),o.push(e.query)),void 0!==e.fragment&&(o.push("#"),o.push(e.fragment)),o.join("")}function z(e,t,r={},o){const n={};return o||(e=_($(e,r),r),t=_($(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(n.scheme=t.scheme,n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=j(t.path||""),n.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(n.userinfo=t.userinfo,n.host=t.host,n.port=t.port,n.path=j(t.path||""),n.query=t.query):(t.path?("/"===t.path.charAt(0)?n.path=j(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?n.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:n.path=t.path:n.path="/"+t.path,n.path=j(n.path)),n.query=t.query):(n.path=e.path,void 0!==t.query?n.query=t.query:n.query=e.query),n.userinfo=e.userinfo,n.host=e.host,n.port=e.port),n.scheme=e.scheme),n.fragment=t.fragment,n}function L(e,t){return e&&e.toString().replace(t&&t.iri?c.PCT_ENCODED:i.PCT_ENCODED,N)}const V={scheme:"http",domainHost:!0,parse:function(e,t){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e},serialize:function(e,t){const r="https"===String(e.scheme).toLowerCase();return e.port!==(r?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}},M={scheme:"https",domainHost:V.domainHost,parse:V.parse,serialize:V.serialize};function k(e){return"boolean"==typeof e.secure?e.secure:"wss"===String(e.scheme).toLowerCase()}const Z={scheme:"ws",domainHost:!0,parse:function(e,t){const r=e;return r.secure=k(r),r.resourceName=(r.path||"/")+(r.query?"?"+r.query:""),r.path=void 0,r.query=void 0,r},serialize:function(e,t){if(e.port!==(k(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},G={scheme:"wss",domainHost:Z.domainHost,parse:Z.parse,serialize:Z.serialize},Q={},Y="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",B="[0-9A-Fa-f]",J=r(r("%[EFef][0-9A-Fa-f]%"+B+B+"%"+B+B)+"|"+r("%[89A-Fa-f][0-9A-Fa-f]%"+B+B)+"|"+r("%"+B+B)),K="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",W=t("[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",'[\\"\\\\]'),X=new RegExp(Y,"g"),ee=new RegExp(J,"g"),te=new RegExp(t("[^]",K,"[\\.]",'[\\"]',W),"g"),re=(new RegExp(t("[^]",K,"[\\.]","[\\[]","[\\x21-\\x5A\\x5E-\\x7E]","[\\]]"),"g"),new RegExp(t("[^]",Y,"[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]"),"g")),oe=re;function ne(e){const t=N(e);return t.match(X)?t:e}const se={scheme:"mailto",parse:function(e,t){const r=e,o=r.to=r.path?r.path.split(","):[];if(r.path=void 0,r.query){let e=!1;const n={},s=r.query.split("&");for(let i=0,c=s.length;i<c;++i){const c=s[i].split("=");switch(c[0]){case"to":const s=c[1].split(",");for(let e=0,t=s.length;e<t;++e)o.push(s[e]);break;case"subject":r.subject=L(c[1],t);break;case"body":r.body=L(c[1],t);break;default:e=!0,n[L(c[0],t)]=L(c[1],t)}}e&&(r.headers=n)}r.query=void 0;for(let e=0,n=o.length;e<n;++e){const n=o[e].split("@");if(n[0]=L(n[0]),t.unicodeSupport)n[1]=L(n[1],t).toLowerCase();else try{n[1]=A.toASCII(L(n[1],t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to ASCII via punycode: "+e}o[e]=n.join("@")}return r},serialize:function(e,t){const r=e,o=null!=(s=e.to)?s instanceof Array?s:"number"!=typeof s.length||s.split||s.setInterval||s.call?[s]:Array.prototype.slice.call(s):[];var s;if(o){for(let e=0,s=o.length;e<s;++e){const s=String(o[e]),i=s.lastIndexOf("@"),c=s.slice(0,i).replace(ee,ne).replace(ee,n).replace(te,x);let a=s.slice(i+1);try{a=t.iri?A.toUnicode(a):A.toASCII(L(a,t).toLowerCase())}catch(e){r.error=r.error||"Email address's domain name can not be converted to "+(t.iri?"Unicode":"ASCII")+" via punycode: "+e}o[e]=c+"@"+a}r.path=o.join(",")}const i=e.headers=e.headers||{};e.subject&&(i.subject=e.subject),e.body&&(i.body=e.body);const c=[];for(const e in i)i[e]!==Q[e]&&c.push(e.replace(ee,ne).replace(ee,n).replace(re,x)+"="+i[e].replace(ee,ne).replace(ee,n).replace(oe,x));return c.length&&(r.query=c.join("&")),r}},ie=/^([^\:]+)\:(.*)/,ce={scheme:"urn",parse:function(e,t){const r=e.path&&e.path.match(ie);let o=e;if(r){const e=t.scheme||o.scheme||"urn",n=r[1].toLowerCase(),s=r[2],i=`${e}:${t.nid||n}`,c=w[i];o.nid=n,o.nss=s,o.path=void 0,c&&(o=c.parse(o,t))}else o.error=o.error||"URN can not be parsed.";return o},serialize:function(e,t){const r=t.scheme||e.scheme||"urn",o=e.nid,n=`${r}:${t.nid||o}`,s=w[n];s&&(e=s.serialize(e,t));const i=e,c=e.nss;return i.path=`${o||t.nid}:${c}`,i}},ae=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,ue={scheme:"urn:uuid",parse:function(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&r.uuid.match(ae)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e,t){const r=e;return r.nss=(e.uuid||"").toLowerCase(),r}};w[V.scheme]=V,w[M.scheme]=M,w[Z.scheme]=Z,w[G.scheme]=G,w[se.scheme]=se,w[ce.scheme]=ce,w[ue.scheme]=ue,e.SCHEMES=w,e.equal=function(e,t,r){return"string"==typeof e?e=$(_(e,r),r):"object"===o(e)&&(e=$(e,r)),"string"==typeof t?t=$(_(t,r),r):"object"===o(t)&&(t=$(t,r)),e===t},e.escapeComponent=function(e,t){return e&&e.toString().replace(t&&t.iri?c.ESCAPE:i.ESCAPE,x)},e.normalize=function(e,t){return"string"==typeof e?e=$(_(e,t),t):"object"===o(e)&&(e=_($(e,t),t)),e},e.parse=_,e.pctDecChars=N,e.pctEncChar=x,e.removeDotSegments=j,e.resolve=function(e,t,r){const o=function(e,t){const r=e;if(t)for(const e in t)r[e]=t[e];return r}({scheme:"null"},r);return $(z(_(e,o),_(t,o),o,!0),o)},e.resolveComponents=z,e.serialize=$,e.unescapeComponent=L,Object.defineProperty(e,"__esModule",{value:!0})}));